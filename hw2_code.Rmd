---
title: "hw2_code"
author: "YuechenLiu"
date: "9/30/2020"
output: html_document
---
```{r setup}
library(tidyverse)
library(readxl)
```

## Problem 1

Read the Mr. Trashwheel dataset.

```{r}
trashwheel_df =
  read_xlsx(
    "./Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = 'Mr. Trash Wheel',
    range = cell_cols('A:N')) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(
    sports_balls = round(sports_balls),
    sports_balls = as.integer(sports_balls)
  )
```

Read precipitation data for 2018 and 2017.

```{r}
precip_2018 = 
  read_excel(
    "./Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = '2018 Precipitation',
    skip = 1
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2018) %>% 
  relocate(year)

precip_2017 = 
  read_excel(
    "./Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = '2017 Precipitation',
    skip = 1
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2017) %>% 
  relocate(year)
```

Now combine annual precipitation.

```{r}
month_df = 
  tibble(
    month = 1:12,
    month_name = month.name
  )

precip_df = 
  bind_rows(precip_2018,precip_2017) 

left_join(precip_df, month_df, by = "month")
```

This dataset contains information from the Mr. Trashwheel trash collector in Baltimore, Maryland. As trash enters the inner harbor, the trashwheel collects that trash, and stores it in a dumpster. The dataset contains information on year, month, and trash collected, include some specific kinds of trash. There are a total of `r nrow(trashwheel_df)` rows in our final dataset. Additional data sheets include month precipitation data.


## Problem 2

Read the NYC Transit dataset.

```{r}
NYC_df = 
  read_csv("./NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  select(line, station_name, station_latitude, station_longitude, route1:route11, entry, vending, entrance_type, ada)
```

Manage the data.

```{r}
NYC_df = 
  mutate(NYC_df, entry = ifelse(entry%in%c('YES'), TRUE, FALSE)) %>%
  mutate_at(vars(route8:route11), as.character) %>%
  pivot_longer(
    route1:route11,
    names_to = 'route_name',
    values_to = 'route_number',
  ) 
```

##Summary

This dataset describes detailed information for NYC Subway. Firstly, I loaded the data. Then I used janitor to make variables look more succinct. The select function was applied to keep only the variables that we want. In order to combine the 11 routes, we need to convert numerical factors to logical ones.

The dataset contains variables including line, station name, station latitude, station longitude, entry, vending, entrance type, ada, route number and route name, or we can summary them as `r names(NYC_df)`. There are a total of `r nrow(NYC_df)` rows and `r ncol(NYC_df)` columns in our final dataset.  

##Using these data:
There are `r nrow(NYC_df %>% distinct (line, station_name))` distinct stations.
There are `r nrow(filter(NYC_df,ada == 'TRUE' ) %>% distinct(line, station_name))` stations that are ADA compliant.
The proportion of station entrances / exits without vending allow entrance is `r nrow(filter(NYC_df, vending == 'NO', entry == 'TRUE'))`divide by `r nrow(filter(NYC_df, vending == 'NO'))` (which the answer is ~37.7%)

There are `r filter(NYC_df, route_name == 'A') %>% distinct (line, station_name) %>%nrow()` stations that serve A train.
Of the stations that serve the A train, there are `r nrow(filter(NYC_df, route_name == 'A', ada == 'TRUE') %>% distinct (line, station_name))` stations that are ADA compliant.


## Problem 3

Read the 













